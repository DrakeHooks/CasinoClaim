services:
  casino-bot:
    container_name: casino-bot
    image: docker.io/drakehooks/casinoclaim:testing
    ports:
      - "5900:5900"
    environment:
      # Persistent chrome instance data
      - CHROME_INSTANCE_DIR=/data/chrome
      - CHROME_PROFILE_DIR=Default
      - PYTHONPATH=/app:/app/apis:/app/app
      # Optional: persist Fortune Coins SB/UC profile
      - FC_USER_DATA_DIR=/data/fortunecoins 
    volumes:
      # Persistent named volume for main Selenium
      - chrome-profile:/data/chrome          
      # Optional: a separate FC profile directory inside the same named volume
      - chrome-profile:/data/fortunecoins    # ‚Üê reuse the same volume namespace
      - ./CAPTCHA-Solver-auto-hCAPTCHA-reCAPTCHA-freely-Chrome-Web-Store.crx:/temp/CAPTCHA-Solver.crx
    env_file:
      - .env
    shm_size: "2g"
    restart: unless-stopped
    entrypoint: ["/bin/bash","-lc","bash /app/entrypoint.sh"]

  watchtower:
    # Detect and auto update casino-bot container every hour
    image: containrrr/watchtower:latest
    container_name: watchtower
    hostname: casino-bot
    environment:
      - WATCHTOWER_CLEANUP=true
      - WATCHTOWER_INCLUDE_STOPPED=true
      - WATCHTOWER_POLL_INTERVAL=3600
    command:
      - casino-bot
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    restart: unless-stopped

volumes:
  chrome-profile:


