services:
  casino-bot:
    container_name: casino-bot
    image: drakehooks/casinoclaim:testing
    ports:
      - "5900:5900"
    environment:
      - CHROME_USER_DATA_DIR=/data/chrome
      - CHROME_PROFILE_DIR=Default
      # helpful for imports that do relative imports:
      - PYTHONPATH=/app:/app/apis:/app/app
    volumes:
      # ðŸ‘‡ mount your repo so /app/main.py and *API.py are visible in the container
      - ./:/app
      # keep Chrome profile out of repo
      - chrome-profile:/data/chrome
      # your CRX if you still need it
      - ./CAPTCHA-Solver-auto-hCAPTCHA-reCAPTCHA-freely-Chrome-Web-Store.crx:/temp/CAPTCHA-Solver-auto-hCAPTCHA-reCAPTCHA-freely-Chrome-Web-Store.crx
    env_file:
      - .env
    shm_size: "2g"
    restart: unless-stopped
    # ðŸ‘‡ ensure Xvfb + VNC + CHROME_INSTANCE_DIR get set
    entrypoint: ["/bin/bash","-lc","/app/entrypoint.sh"]
    labels:
      - com.centurylinklabs.watchtower.enable=true

  watchtower:
    container_name: watchtower
    image: containrrr/watchtower:latest
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
    environment:
      - WATCHTOWER_CLEANUP=true
      - WATCHTOWER_LABEL_ENABLE=true
      - WATCHTOWER_POLL_INTERVAL=3600
    restart: unless-stopped

volumes:
  chrome-profile:
