!function(){"use strict";var e=self.vAPI=self.vAPI||{},t=self.chrome,n=t.runtime.getManifest();e.chrome=!0,e.cantWebsocket=!0;var r=function(){};e.app={name:n.name,version:n.version},e.app.restart=function(){t.runtime.reload()},e.getUILanguage=t.i18n.getUILanguage,e.onExtensionLaunch=function(t){e.storage.get({version:"0.0.0.0"},function(n){var r=n.version;e.app.version>r&&"0.0.0.0"!==r?t({reason:"update",lastVersion:r}):e.storage.get({firstRun:!0},function(n){!0===n.firstRun?(t({reason:"install"}),e.storage.set({firstRun:!1})):t({reason:"startup"})})})},e.setUninstallURL=function(e,n){t.runtime.setUninstallURL(e,n)},e.storage=t.storage.local,e.cacheStorage=t.storage.local,e.tabs={},e.isBehindTheSceneTabId=function(e){return"-1"===e.toString()},e.noTabId="-1";var s=function(e){return"string"==typeof e&&(e=parseInt(e,10)),"number"!=typeof e||isNaN(e)||-1===e?0:e};e.tabs.registerListeners=function(){this.onNavigation;var e=this.onUpdated||r,n=function(e){if(!1===e.startsWith("data:"))return e;var t=e.indexOf(",");if(-1===t)return e;var n=e.slice(0,t);return-1===n.search(/\s/)?e:n.replace(/\s+/,"")+e.slice(t)};t.tabs.onUpdated.addListener(function(t,r,s){r.url&&(r.url=n(r.url)),e(t.toString(),r,s)}),"function"==typeof this.onClosed&&t.tabs.onRemoved.addListener(this.onClosed)},e.tabs.get=function(e,n){var r=function(e){t.runtime.lastError,n(e)};if(null===e){t.tabs.query({active:!0,currentWindow:!0},function(e){t.runtime.lastError,n(e[0])})}else 0===(e=s(e))?r(null):t.tabs.get(e,r)},e.tabs.open=function(n){var r=n.url;if("string"!=typeof r||""===r)return null;!0!==/^[\w-]{2,}:/.test(r)&&(r=e.getURL(r));var i=function(){void 0===n.active&&(n.active=!0);var i=function(){var i={url:r,active:!!n.active},o=function(e){void 0!==e&&e.active&&t.windows.update(e.windowId,{focused:!0})};if(!n.tabId)return void 0!==n.index&&(i.index=n.index),void t.tabs.create(i,o);t.tabs.update(s(n.tabId),i,function(r){e.lastError()?t.tabs.create(i,o):void 0!==n.index&&t.tabs.move(r.id,{index:n.index})})};!0!==n.popup?-1===n.index?e.tabs.get(null,function(e){e?n.index=e.index+1:delete n.index,i()}):i():t.windows.create({url:n.url,type:"popup"})};if(n.select){var o=r.indexOf("#"),a=-1===o?r:r.slice(0,o);t.tabs.query({url:a},function(e){var n=e[0];if(n){var s={active:!0,url:void 0};r!==n.url&&(s.url=r),t.tabs.update(n.id,s,function(e){t.windows.update(e.windowId,{focused:!0})})}else i()})}else i()},e.tabs.replace=function(n,r){if(0!==(n=s(n))){var i=r;!0!==/^[\w-]{2,}:/.test(i)&&(i=e.getURL(i)),t.tabs.update(n,{url:i},function(){t.runtime.lastError})}},e.tabs.remove=function(e){if(0!==(e=s(e))){t.tabs.remove(e,function(){t.runtime.lastError})}},e.tabs.reload=function(e){if(0!==(e=s(e))){t.tabs.reload(e,function(){t.runtime.lastError})}},e.tabs.select=function(e){0!==(e=s(e))&&t.tabs.update(e,{active:!0},function(e){t.runtime.lastError,e&&t.windows.update(e.windowId,{focused:!0})})},e.messaging={ports:{},listeners:{},defaultHandler:null,NOOPFUNC:r,UNHANDLED:"vAPI.messaging.notHandled"},e.messaging.listen=function(e,t){this.listeners[e]=t},e.messaging.onPortMessage=function(){var t=e.messaging,n={},r=function(e,t,n){this.callback=this.proxy.bind(this),this.init(e,t,n)};r.prototype.init=function(t,n,r){return this.port=t,this.request=n,this.timerId=void 0!==r?e.setTimeout(this.callback,r):null,this},r.prototype.proxy=function(e){null!==this.timerId&&(clearTimeout(this.timerId),delete n[this.timerId],this.timerId=null),t.ports.hasOwnProperty(this.port.name)&&this.port.postMessage({auxProcessId:this.request.auxProcessId,channelName:this.request.channelName,msg:void 0!==e?e:null}),this.port=this.request=null,i.push(this)};var i=[],o=function(e,t,n){var s=i.pop();return s?s.init(e,t,n):new r(e,t,n)};return function(e,r){if(void 0===e.toTabId)if(void 0===e.mainProcessId){var i=t.NOOPFUNC;void 0!==e.auxProcessId&&(i=o(r,e).callback);var a=t.UNHANDLED,u=t.listeners[e.channelName];"function"==typeof u&&(a=u(e.msg,r.sender,i)),a===t.UNHANDLED&&(a=t.defaultHandler(e.msg,r.sender,i))===t.UNHANDLED&&i()}else!function(e){var t=e.mainProcessId;if(void 0!==t&&!1!==n.hasOwnProperty(t)){var r=n[t];delete n[t],r.callback(e.msg)}}(e);else!function(e,r){var i,a,u,c=s(e.toTabId);for(var d in t.ports)if(!1!==t.ports.hasOwnProperty(d)&&0===(i=t.ports[d]).sender.frameId&&i.sender.tab.id===c){a=i;break}void 0!==e.auxProcessId&&(u=o(r,e,1023)),void 0!==a?(void 0!==u&&(n[u.timerId]=u),a.postMessage({mainProcessId:u&&u.timerId,channelName:e.toChannel,msg:e.msg})):void 0!==u&&u.callback()}(e,r)}}(),e.messaging.onPortDisconnect=function(t){t.onDisconnect.removeListener(e.messaging.onPortDisconnect),t.onMessage.removeListener(e.messaging.onPortMessage),delete e.messaging.ports[t.name]},e.messaging.onPortConnect=function(t){t.onDisconnect.addListener(e.messaging.onPortDisconnect),t.onMessage.addListener(e.messaging.onPortMessage),e.messaging.ports[t.name]=t},e.messaging.setup=function(n){null===this.defaultHandler&&("function"!=typeof n&&(n=function(){return e.messaging.UNHANDLED}),this.defaultHandler=n,t.runtime.onConnect.addListener(this.onPortConnect))},e.messaging.broadcast=function(e){var t={broadcast:!0,msg:e};for(var n in this.ports)!1!==this.ports.hasOwnProperty(n)&&this.ports[n].postMessage(t)},e.net={},e.net.registerListeners=function(){var e=t.webRequest,n=/\bChrom[a-z]+\/(?:3[89]|4[0-8])\.[\d.]+\b/.test(navigator.userAgent),r={main_frame:!0,sub_frame:!0,stylesheet:!0,script:!0,image:!0,object:!0,xmlhttprequest:!0,other:!0};e.ResourceType&&function(){for(var t in e.ResourceType)e.ResourceType.hasOwnProperty(t)&&(r[e.ResourceType[t]]=!0)}();var s=new Map([["eot","font"],["otf","font"],["svg","font"],["ttf","font"],["woff","font"],["woff2","font"],["mp3","media"],["mp4","media"],["webm","media"],["gif","image"],["ico","image"],["jpeg","image"],["jpg","image"],["png","image"],["webp","image"]]),i=function(e){e.tabId=e.tabId.toString();var t=e.type;if("ping"!==t)if("imageset"!==t){if("other"===t){var r=new URL(e.url).pathname,i=r.indexOf(".",r.length-6);if(-1!==i&&(t=s.get(r.slice(i+1))))e.type=t;else{if(e.responseHeaders){if((t=function(e,t){for(var n=e.length;n--;)if(e[n].name.toLowerCase()===t)return e[n].value.trim();return""}(e.responseHeaders,"content-type")).startsWith("font/"))return void(e.type="font");if(t.startsWith("image/"))return void(e.type="image");if(t.startsWith("audio/")||t.startsWith("video/"))return void(e.type="media")}n&&(e.type="object")}}}else e.type="image";else e.type="beacon"},o=this.onBeforeRequest.callback,a=r.websocket?function(e){return i(e),o(e)}:function(e){if(e.url.endsWith("ubofix=f41665f3028c7fd10eecf573336216d3")){var t=function(e){if("image"===e.type||"HEAD"===e.method&&"xmlhttprequest"===e.type){var t=e.url,n=/[?&]u(?:rl)?=([^&]+)/.exec(t);if(null!==n){e.type="websocket",e.url=decodeURIComponent(n[1]);var r=o(e);return r&&r.cancel?r:{redirectUrl:null!==(n=/[?&]r=([^&]+)/.exec(t))?decodeURIComponent(n[1]):"data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}}}}(e);if(void 0!==t)return t}return i(e),o(e)};(function(){var t,n;a&&!1===e.onBeforeRequest.hasListener(a)&&(t=this.onBeforeRequest.urls||["<all_urls>"],n=this.onBeforeRequest.types||void 0,e.onBeforeRequest.addListener(a,{urls:t,types:n},this.onBeforeRequest.extra))}).bind(this)()},e.lastError=function(){return t.runtime.lastError},e.preopenedTabUrls=[],e.capturePreOpenedTabUrls=function(){t.tabs.query({url:"<all_urls>"},function(t){for(var n,r=t.length;r--;)n=t[r],e.preopenedTabUrls.push(n.url)})},e.onLoadAllCompleted=function(){t.tabs.query({url:"<all_urls>"},function(e){for(var t,n=webSafety,r=e.length;r--;)t=e[r],n.tabContextManager.commit(t.id,t.url),n.bindTabToPageStats(t.id)})},e.punycodeHostname=function(e){return e},e.punycodeURL=function(e){return e}}();