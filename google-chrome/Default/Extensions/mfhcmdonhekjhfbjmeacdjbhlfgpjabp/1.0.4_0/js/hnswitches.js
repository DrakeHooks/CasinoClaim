"use strict";webSafety.HnSwitches=function(){var t=function(){this.reset()},e={"no-strict-blocking":0},i={dontBlockDoc:"no-strict-blocking"},r={1:"true",2:"false"},n={true:1,false:2,on:1,off:2},s=/[g-z_-]/,o=/\.\d+$/,h=function(t){var e=t.indexOf(".");return-1!==e?t.slice(e+1):"*"!==t&&""!==t?"*":""},u=function(t){return"*"!==t&&""!==t?"*":""},c=function(t){return function(t){return!s.test(t)&&(!!o.test(t)||t.startsWith("["))}(t)?u:h};return t.prototype.reset=function(){this.switches={},this.n="",this.z="",this.r=0},t.prototype.toggle=function(t,i,r){var n=e[t];if(void 0===n)return!1;if(r===this.evaluate(t,i))return!1;var s=this.switches[i]||0;return s&=~(3<<n),0===(s|=r<<n)?delete this.switches[i]:this.switches[i]=s,!0},t.prototype.toggleOneZ=function(t,i,r){var n=e[t];if(void 0===n)return!1;var s=this.evaluateZ(t,i);if(r===s)return!1;void 0===r&&(r=!s);var o=this.switches[i]||0;return 0===(o&=~(3<<n))?delete this.switches[i]:this.switches[i]=o,(s=this.evaluateZ(t,i))===r||(this.switches[i]=o|(r?1:2)<<n,!0)},t.prototype.toggleBranchZ=function(t,e,i){var r=this.toggleOneZ(t,e,i),n=e.length;for(var s in this.switches)!1!==this.switches.hasOwnProperty(s)&&s!==e&&(s.length<=n||!1!==s.endsWith(e)&&"."===s.charAt(s.length-n-1)&&(r=this.toggle(t,s,0)||r));return r},t.prototype.toggleZ=function(t,e,i,r){return!0===i?this.toggleBranchZ(t,e,r):this.toggleOneZ(t,e,r)},t.prototype.evaluate=function(t,i){var r=this.switches[i]||0;if(0===r)return 0;var n=e[t];return void 0===n?0:r>>>n&3},t.prototype.evaluateZ=function(t,i){var r=e[t];if(void 0===r)return this.r=0,!1;this.n=t;for(var n,s=i,o=c(s);;){if(0!==(n=this.switches[s]||0)&&0!==(n=n>>>r&3))return this.z=s,this.r=n,1===n;if(""===(s=o(s)))break}return this.r=0,!1},t.prototype.toResultString=function(){return 1!==this.r?"":"ub:"+this.n+": "+this.z+" true"},t.prototype.toString=function(){var t,i,n,s=[];for(n in this.switches)if(!1!==this.switches.hasOwnProperty(n))for(t in e)!1!==e.hasOwnProperty(t)&&0!==(i=this.evaluate(t,n))&&s.push(t+": "+n+" "+r[i]);return s.join("\n")},t.prototype.fromString=function(t){var r,s,o,h,u,c,f,a=t.length,l=0;for(this.reset();l<a;)(r=t.indexOf("\n",l))<0&&(r=t.indexOf("\r",l))<0&&(r=a),s=t.slice(l,r).trim(),l=r+1,-1!==(o=s.indexOf("# "))&&(s=s.slice(0,o).trim()),""!==s&&3===(h=s.split(/\s+/)).length&&-1!==(o=(u=h[0]).indexOf(":"))&&(u=u.slice(0,o),u=i[u]||u,!1!==e.hasOwnProperty(u)&&(c=punycode.toASCII(h[1]),f=h[2],!1!==n.hasOwnProperty(f)&&this.toggle(u,c,n[f])))},t}(),webSafety.hnSwitches=new webSafety.HnSwitches;